apiVersion: v1
kind: Service
metadata:
  name: edgeflow-redis-data-service  # ⭐ 데이터 전용 Redis 서비스 이름
spec:
  ports:
    - port: 6380      # 외부에서는 6380으로 접속
      targetPort: 6379 # 내부에서는 6379로 받음 (표준 이미지 사용)
  selector:
    app: edgeflow-redis-data
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: edgeflow-redis-data
spec:
  replicas: 1
  selector:
    matchLabels:
      app: edgeflow-redis-data
  template:
    metadata:
      labels:
        app: edgeflow-redis-data
    spec:
      containers:
        - name: redis
          image: redis:6-alpine
          ports:
            - containerPort: 6379
          resources:
            limits:
              memory: "1Gi"    # 데이터용이므로 메모리 넉넉하게
      nodeSelector:
        edgeflow.io/role: infra
